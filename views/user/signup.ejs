<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>登記</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
    <script defer src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa" crossorigin="anonymous"></script>

    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <div class="mx-auto" style="width: 320px;">
        <h3>登記</h3>

        <form action="/user/signup" method="post" novalidate>
            <div class="input-group input-group-sm mt-4 mb-2">
                <label for="username" class="form-label me-2"">用戶名稱</label>
                <input type="text" class="form-control" name="username" id="username" value="<%= locals.username %>" placeholder="輸入用戶名稱" required>
                <div class="invalid-feedback">Username is missing.</div>
            </div>

            <div class="input-group input-group-sm mb-2">
                <label for="password" class="form-label me-2"">用戶密碼</label>
                <input type="password" class="form-control" name="password" value="<%= locals.password %>" placeholder="輸入用戶密碼" required>
                <div class="invalid-feedback">Password is missing.</div>
            </div>

            <div class="input-group input-group-sm mb-2">
                <label for="password2" class="form-label me-2">確認密碼</label>
                <input type="password" class="form-control" name="password2" value="<%= locals.password2 %>" placeholder="輸入確認密碼" required>
                <div class="invalid-feedback">Confirmed password is missing.</div>
            </div>

            <div class="input-group input-group-sm mb-2">
                <label for="tunamec" class="form-label me-2">中文姓名</label>
                <input type="text" class="form-control" name="tunamec" value="<%= locals.tunamec %>" placeholder="輸入中文名稱">
            </div>

            <div class="input-group input-group-sm mb-2">
                <label for="tunamep" class="form-label me-2">葡文姓名</label>
                <input type="text" class="form-control" name="tunamep" value="<%= locals.tunamep %>" placeholder="輸入葡文名稱">
            </div>

            <div class="d-flex justify-content-center">
                <button type="submit" class="btn btn-primary btn-sm me-2">Go</button>                
                <button onclick="history.back()"  class="btn btn-secondary btn-sm">Back</button>
            </div>

            <% if (locals.message) { %>
                <div class="alert alert-danger alert-dismissible" role="alert">
                    <%= locals.message %>
                    <button class="btn-close" aria-label="close" data-bs-dismiss="alert">                        
                    </button>
                </div>            
            <% } %>
        </form>

        <%- include('../partials/footer.ejs'); %>
    </div>

    <script>
        document.getElementById("username").focus();

        const form = document.querySelector("form")
        form.addEventListener("submit", e => {
            if (!form.checkValidity()) {
                e.preventDefault()
            }
            form.classList.add('was-validated')
        })
    </script>
</body>
</html>